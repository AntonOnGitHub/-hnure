## Комп'ютерні системи імітаційного моделювання
## **СПм-22-3**, **Білоконь Антон Сергійович**
### Лабораторна робота №**3**. Використання засобів обчислювального интелекту для оптимізації імітаційних моделей

<br>

### Варіант 11, модель у середовищі NetLogo:
[Autumn](https://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Autumn.nlogo)

<br>

### Вербальний опис моделі:
Ця модель імітує те, як листя змінює свої кольори та опадає, що дає змогу дослідити та зрозуміти це прекрасне річне видовище. Кольори, які ми бачимо в кожному листі, походять від присутності природних речовин, які виробляються та зберігаються в кожному листі. На колір листя впливають три речовини:
- Зелений колір походить від хлорофілу (або набору споріднених речовин, відомих як хлорофіли), який перетворює сонячне світло та воду на цукор. Молекули хлорофілу руйнуються і не відновлюються, коли вони піддаються впливу надмірного сонячного світла та коли температура низька. Таким чином, холодні сонячні осінні дні призводять до зниження загальної концентрації хлорофілу. Загальна концентрація хлорофілу знову зростає під час сонячного світла (якщо його не надто багато!) і коли є вода.
- Жовтий колір походить від речовини під назвою каротин. Молекули каротину допомагають надати колір моркви та батату. Концентрація каротину залишається постійною протягом усього життя листка. Однак жовтий колір часто маскується зеленим кольором хлорофілу. Лист з більшою кількістю хлорофілу (типово влітку) буде виключно зеленим, хоча і з сильними жовтими відтінками, замаскованими за зеленим. Проте коли хлорофіл гине, стає очевидною присутність каротину, що призводить до жовтого листя.
- Червоний походить від речовини під назвою антоціани. Молекули антоціану утворюються за наявності високих концентрацій цукру та води в листі. (Чим вища концентрація цукру, тим більше утворюється антоціанів.) Концентрація цукру зростає, коли холодна погода змушує дерево перекривати циркуляцію води до решти дерева; будь-яка вода та цукор, що потрапили в лист, потім перетворюються на антоціани.  

Кожен хід годинника в моделі складається з двох етапів: (1) погода (дощ, вітер, сонце) впливає на листя, додаючи або видаляючи цукор, воду чи хлорофіл відповідно до обставин, і (2) лист реагує на навколишнє середовище. , додаючи антоціани за необхідності та змінюючи колір відповідно до модифікованого середовища.

<br>

### Керуючі параметри:

- **number-of-leaves** - цей параметр вказує, скільки листів буде присутньо в середовищі під час запуску симуляції. Змінюючи значення "number-of-leaves" за допомогою
  відповідного слайдера, маємо змогу впливати на кількість листів, які будуть проходити етапи під час виконання симуляції.
- **start-sugar-mean** - цей параметр вказує, яке середнє значення для змісту цукру серед листя.
- **start-sugar-stddev** - цей параметр вказує, розподіл початкового розподілу цукру серед листя.
- **temperature** - цей параметр вказує, на температуру навколишнього середовища.
- **rain-intensity** - цей параметр вказує, на інтенсивність дощу.
- **wind-factor** - цей параметр вказує, на силу вітру навколишнього середовища.
- **sun-intensity** - цей параметр вказує, на інтенсивність впливу сонця.

### Внутрішні параметри:
- **water-level** - відображає кількість води в листі.
- **sugar-level** - показує кількість цукру в листі.
- **attachedness** - визначає, наскільки тісно лист прикріплений до дерева.
- **chlorophyll** - відображає рівень хімічних речовин, що забарвлюють листя в зелений колір.
- **carotene** - визначає рівень хімічних речовин, які надають листю жовтий колір.
- **anthocyanin** - показує рівень хімічних речовин, які забарвлюють листя в червоний колір.
- **location** - показує місце знаходження капель дощу, може бути "падає", "у коренях", "у стовбурі" чи "у листі".
- **amount-of-water** - показує кількість води.
- **bottom-line** - визначає, де знаходиться поверхня землі.
- **evaporation-temp** - температура, при якій вода випаровується.

### Показники роботи системи:

- **Leaves** - графік відображення двох показників живих листів та мертвих листів (які впали на землю).
- **Weather conditions** - графік відображення погодних умов таких як: дощ, сонце, температура, вітер.
- **Leaf averages** - графік відображення середніх значень змісту таких складників таких як: хлорофіл, вода, цукор, каротин, антоціан, приєднання (міцність з якою
  тримається лист).


<br>

### Налаштування середовища BehaviorSearch:

**Обрана модель**:
<pre>
C:\Program Files\NetLogo 6.3.0\models\Sample Models\Biology\Autumn.nlogo
</pre>
**Параметри моделі** (вкладка Model):  
*Параметри та їх модливі діапазони були **автоматично** вилучені середовищем BehaviorSearch із вибраної імітаційної моделі, для цього є кнопка «Завантажити діапазони параметрів із інтерфейсу моделі»*:
<pre>
["number-of-leaves" [1 1 2500]]
["wind-factor" [0 1 10]]
["temperature" [0 1 40]]
["rain-intensity" [0 1 30]]
["sun-intensity" [0 1 100]]
["start-sugar-mean" [0 1 100]]
["start-sugar-stddev" [0 1 50]]
["leaf-display-mode" "solid" "chlorophyll" "water" "sugar" "carotene" "anthocyanin" "attachedness"] 
</pre>
Використовувана **міра**:  
Для фітнес-функції *(вона ж функція пристосованості або цільова функція)* було обрано **значення відпавшого листя**. Вираз для її розрахунку вказано у параметрі "**Measure**":
<pre>
count dead-leaves
</pre>
Кількість тактів повинна враховуватися **у кінці** симуляції тривалістю 100 тактів, починаючи з 0 такту симуляції.  
Параметр зупинки за умовою ("**Stop if**") у разі не використовувався.  
Загальний вигляд вкладки налаштувань параметрів моделі:  

![Вкладка налаштувань параметрів моделі](parameters.png)

**Налаштування цільової функції** (вкладка Search Objective):  
Метою підбору параметрів імітаційної моделі є **мінімізація** значення – це вказано через параметр "**Goal**" зі значенням **Maximize Fitness**. Враховуватися повинно середнє значення. Для цього у параметрі "**Collected measure**", що визначає спосіб обліку значень обраного показника, вказано **MEAN_ACROSS_STEP**.  
Щоб уникнути викривлення результатів через випадкові значення, що використовуються в логіці самої імітаційної моделі, **кожна симуляція повторюється по 10 разів**, результуюче значення розраховується як **середнє арифметичне**. 
Загальний вигляд вкладки налаштувань цільової функції:  

![Вкладка налаштувань цільової функції](objective.png)

**Налаштування алгоритму пошуку** (вкладка Search Algorithm):  
Загальний вид вкладки налаштувань алгоритму пошуку:  

![Вкладка налаштувань пошуку](search.png)

<br>

### Результати використання BehaviorSearch:
Діалогове вікно запуску пошуку:  

![Вікно запуску пошуку](dialog.png)

Результат пошуку параметрів імітаційної моделі, використовуючи **генетичний алгоритм**:  

![Результати пошуку за допомогою ГА](result-ga.png)

Результат пошуку параметрів імітаційної моделі, використовуючи **випадковий пошук**:  

![Результати випадкового пошуку](result-rs.png)
